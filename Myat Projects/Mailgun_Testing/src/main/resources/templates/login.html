<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login Form</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/css/bootstrap.min.css" integrity="sha384-DhY6onE6f3zzKbjUPRc2hOzGAdEf4/Dz+WJwBvEYL/lkkIsI3ihufq9hk9K4lVoK" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <form id="loginForm">
            <h2>User Login Form</h2>
            <div class="form-group">
                <label for="username">User Name</label>
                <input type="text" class="form-control" id="username" placeholder="Enter User Name">
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Enter Password">
            </div>
            <button type="submit" class="btn btn-secondary" id="btnSubmit">Login</button>
        </form>
    </div>

<!--    <script>-->
<!--        const htmlForm = document.getElementById("loginForm");-->
<!--        const jsonForm = buildJsonForm(htmlForm);-->

<!--        function buildJsonForm(htmlForm) {-->
<!--            const jsonFormData = {};-->
<!--            for(const pair of new FormData(htmlForm)) {-->
<!--                jsonFormData[pair[0]] = pair[1];-->
<!--            }-->
<!--            return jsonFormData;-->
<!--        }-->

<!--        document.getElementById("btnSubmit").onclick(function (e) {-->

<!--        })-->

<!--        async function performPostRequest(path, header, body){-->
<!--            try {-->

<!--            } catch (err) {-->
<!--                console.log(err);-->
<!--            }-->
<!--            const response = await fetch("/auth", {-->
<!--                method: "POST",-->
<!--                body: JSON.stringify(jsonForm)-->
<!--            });-->
<!--        }-->
<!--        performPostRequest();-->
<!--    </script>-->

<!--    <script>-->
<!--        document.getElementById('loginForm').addEventListener('submit', function (e) {-->
<!--            e.preventDefault();-->
<!--            const jsonForm = FormDataToJSON(document.getElementById('loginForm'));-->
<!--            // fetch('http://localhost:8080/auth', {-->
<!--            //     method: 'POST',-->
<!--            //     headers: {'Content-Type': 'application/json'},-->
<!--            //     body: JSON.stringify(jsonForm)-->
<!--            // });-->
<!--            console.log(jsonForm);-->
<!--        });-->

<!--        function FormDataToJSON(FormElement){-->
<!--            let formData = new FormData(FormElement);-->
<!--            let convertedJSON= {};-->
<!--            for (const [key, value]  of formData.entries())-->
<!--            {-->
<!--                convertedJSON[key] = value;-->
<!--                console.log(convertedJSON);-->
<!--            }-->
<!--            return convertedJSON;-->
<!--        }-->
<!--    </script>-->

<script>
    document.getElementById('loginForm').onsubmit = (e) => {

        let data = {
            username: document.querySelector('#username').value,
            password: document.querySelector('#password').value
        };
        debugger
        fetch('http://localhost:8080/auth', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data),
            redirect: 'index'
        }).
        then((res) => {
            console.log(res);
        });
    };

</script>
</body>
</html>